<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <title>StrawberryFlix</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet"/>

  <style>
    body {
      margin: 0;
      font-family: Inter, sans-serif;
      background: #0f0f0f;
      color: #fff;
    }

    header {
      display: flex;
      align-items: center;
      padding: 20px;
      gap: 16px;
    }

    /* ===== Strawberry logo + eyes ===== */
    .strawberry-wrapper {
      position: relative;
      display: inline-block;
    }

    .brand-logo {
      width: 64px;
    }

    .eyes {
      position: absolute;
      top: 18px;
      left: 18px;
      display: flex;
      gap: 8px;
      pointer-events: none;
    }

    .eye {
      width: 16px;
      height: 16px;
      background: white;
      border-radius: 50%;
      overflow: hidden;
      position: relative;
      transition: height 0.12s ease-in-out;
    }

    .pupil {
      width: 6px;
      height: 6px;
      background: #111;
      border-radius: 50%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: transform 0.06s ease-out;
    }

    h1 {
      font-size: 24px;
      font-weight: 600;
    }

    /* ===== Tabs ===== */
    .tabs {
      display: flex;
      gap: 10px;
      padding: 0 20px;
    }

    .tabs button {
      background: #1f1f1f;
      color: #fff;
      border: none;
      padding: 10px 16px;
      border-radius: 6px;
      cursor: pointer;
    }

    .tabs button.active {
      background: #e50914;
    }

    /* ===== Grid ===== */
    .panel {
      display: none;
      padding: 20px;
    }

    .panel.active {
      display: block;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 16px;
    }

    .movie-card {
      background: #1a1a1a;
      border-radius: 8px;
      overflow: hidden;
    }

    .movie-card img {
      width: 100%;
      display: block;
    }

    .movie-content {
      padding: 10px;
    }

    .movie-title {
      font-size: 14px;
      margin: 0 0 6px;
    }

    .movie-description {
      font-size: 12px;
      opacity: 0.8;
    }

    /* ===== Pagination ===== */
    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 12px;
      margin-top: 20px;
    }

    .pagination button {
      background: #111;
      color: #fff;
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
    }

    .page-indicator {
      font-size: 14px;
    }
  </style>
</head>

<body>

<header>
  <div class="strawberry-wrapper">
    <img class="brand-logo"
      src="https://cdn.grapesjs.com/workspaces/cmjnaklm4257h12grfeleoa9s/assets/4c1815bc-0581-485e-80c4-76ee5c3beee0__untitled.jpg"/>

    <div class="eyes">
      <div class="eye"><div class="pupil"></div></div>
      <div class="eye"><div class="pupil"></div></div>
    </div>
  </div>

  <h1>StrawberryFlix</h1>
</header>

<div class="tabs">
  <button data-tab="action" class="active">Action</button>
  <button data-tab="romance">Romance</button>
  <button data-tab="comedy">Comedy</button>
  <button data-tab="horror">Horror</button>
</div>

<!-- PANELS -->
<div id="action" class="panel active">
  <div class="grid"></div>
  <div class="pagination">
    <button class="prev">◀</button>
    <span class="page-indicator">Página 1</span>
    <button class="next">▶</button>
  </div>
</div>

<div id="romance" class="panel">
  <div class="grid"></div>
  <div class="pagination">
    <button class="prev">◀</button>
    <span class="page-indicator">Página 1</span>
    <button class="next">▶</button>
  </div>
</div>

<div id="comedy" class="panel">
  <div class="grid"></div>
  <div class="pagination">
    <button class="prev">◀</button>
    <span class="page-indicator">Página 1</span>
    <button class="next">▶</button>
  </div>
</div>

<div id="horror" class="panel">
  <div class="grid"></div>
  <div class="pagination">
    <button class="prev">◀</button>
    <span class="page-indicator">Página 1</span>
    <button class="next">▶</button>
  </div>
</div>

<script>
/* ===== TMDB CONFIG ===== */
const TMDB_KEY = "9317bbc1c1ea07c7c7eb7b70a9669482";
const BASE_IMG = "https://image.tmdb.org/t/p/w300";

const GENRES = {
  action: 28,
  romance: 10749,
  comedy: 35,
  horror: 27
};

const state = {
  action: 1,
  romance: 1,
  comedy: 1,
  horror: 1
};

/* ===== LOAD MOVIES ===== */
async function loadMovies(type) {
  const panel = document.getElementById(type);
  const grid = panel.querySelector(".grid");
  const indicator = panel.querySelector(".page-indicator");
  const page = state[type];

  grid.innerHTML = "Carregando...";

  const url =
    `https://api.themoviedb.org/3/discover/movie?api_key=${TMDB_KEY}&with_genres=${GENRES[type]}&language=pt-BR&sort_by=popularity.desc&page=${page}`;

  const res = await fetch(url);
  const data = await res.json();

  grid.innerHTML = "";

  data.results.slice(0, 12).forEach(movie => {
    const card = document.createElement("div");
    card.className = "movie-card";

    card.innerHTML = `
      <img src="${movie.poster_path ? BASE_IMG + movie.poster_path : ""}">
      <div class="movie-content">
        <h3 class="movie-title">${movie.title}</h3>
        <p class="movie-description">
          ${movie.overview ? movie.overview.slice(0, 80) + "…" : ""}
        </p>
      </div>
    `;

    grid.appendChild(card);
  });

  indicator.textContent = `Página ${page}`;
}

/* ===== Tabs ===== */
document.querySelectorAll(".tabs button").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".tabs button").forEach(b => b.classList.remove("active"));
    document.querySelectorAll(".panel").forEach(p => p.classList.remove("active"));

    btn.classList.add("active");
    const tab = btn.dataset.tab;
    document.getElementById(tab).classList.add("active");

    loadMovies(tab);
  });
});

/* ===== Pagination ===== */
document.querySelectorAll(".panel").forEach(panel => {
  const type = panel.id;
  const prev = panel.querySelector(".prev");
  const next = panel.querySelector(".next");

  prev.onclick = () => {
    if (state[type] > 1) {
      state[type]--;
      loadMovies(type);
    }
  };

  next.onclick = () => {
    state[type]++;
    loadMovies(type);
  };
});

/* ===== Eyes follow cursor ===== */
document.addEventListener("mousemove", e => {
  document.querySelectorAll(".eye").forEach(eye => {
    const pupil = eye.querySelector(".pupil");
    const r = eye.getBoundingClientRect();

    const angle = Math.atan2(
      e.clientY - (r.top + r.height / 2),
      e.clientX - (r.left + r.width / 2)
    );

    const x = Math.cos(angle) * 4;
    const y = Math.sin(angle) * 4;

    pupil.style.transform = `translate(${x - 3}px, ${y - 3}px)`;
  });
});

/* ===== Eyes blink ===== */
setInterval(() => {
  document.querySelectorAll(".eye").forEach(eye => {
    eye.style.height = "4px";
    setTimeout(() => eye.style.height = "16px", 120);
  });
}, 4500);

/* INIT */
loadMovies("action");
</script>

</body>
</html>
